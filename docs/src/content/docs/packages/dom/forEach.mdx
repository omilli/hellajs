---
title: forEach
description: Loops through an array and renders a template for each item.
---

Loops through an array and renders a template for each item.

```jsx
import { signal } from '@hellajs/core';
import { forEach } from '@hellajs/dom';

const items = signal([1, 2, 3]);

<ul>
  {forEach(items, (item) =>
    <li>{item}</li>
  )}
</ul>
```

## API

```typescript
function forEach<T>(
  items: T[] | Signal<T[]> | (() => T[]),
  render: (item: T, index: number) => VNodeValue
): VNodeValue
```

## Tracking Keys

forEach optimizes list updates by tracking item identity through keys for efficient DOM updates.

Automatically detects keys from `id` or `key` properties, or you can provide them manually.

```jsx
const users = signal([
  { id: 1, name: 'Alice' },
  { id: 2, name: 'Bob' }
]);

// Automatic key detection from 'id'
<ul>
  {forEach(users, (user) =>
    <li>{user.name}</li>
  )}
</ul>

// Manual key via JSX prop
<ul>
  {forEach(users, (user) =>
    <li key={user.id}>{user.name}</li>
  )}
</ul>
```

## Array Updates

Use batch() when making multiple array changes to prevent unnecessary re-renders between updates.

Batch updates to the signal Array or array item signals to avoid unnecessary re-renders.

```jsx
import { batch } from '@hellajs/core';

const todos = signal([
  { id: 1, text: 'Buy milk', done: false }
]);

// Single update
todos([...todos(), { id: 2, text: 'Walk dog', done: false }]);

// Multiple updates - use batch() for efficiency
const handleBatchUpdate = () => {
  batch(() => {
    todos([...todos(), { id: 2, text: 'Walk dog', done: false }]);
    todos(todos().map(t => t.id === 1 ? { ...t, done: true } : t));
  });
};
```

## Performance Tips

Optimize forEach rendering for large lists.

```jsx
// âœ… Good: Use stable references for functions
const ItemComponent = ({ item, onToggle }) => (
  <li>
    <input 
      type="checkbox" 
      checked={item.done} 
      onchange={() => onToggle(item.id)} 
    />
    {item.text}
  </li>
);

const todos = signal([]);
const toggleTodo = useCallback((id) => {
  todos(todos().map(t => t.id === id ? { ...t, done: !t.done } : t));
}, []);

<ul>
  {forEach(todos, (todo) => 
    <ItemComponent item={todo} onToggle={toggleTodo} key={todo.id} />
  )}
</ul>
```

## Common Patterns

Handle loading and empty states gracefully.

```jsx
const items = signal([]);
const loading = signal(true);

const List = () => {
  if (loading()) return <div>Loading...</div>;
  if (items().length === 0) return <div>No items found</div>;
  
  return (
    <ul>
      {forEach(items, (item, index) => 
        <li key={item.id}>
          {index + 1}. {item.name}
        </li>
      )}
    </ul>
  );
};
```