---
title: Data Fetching
description: Strategies for fetching asynchronous data in HellaJS.
---

import { Aside } from '@astrojs/starlight/components';

# Data Fetching

HellaJS offers several patterns for handling asynchronous data.

## Simple Fetching with Effects

You can use a `signal` to store your data and an `effect` to fetch it when the component loads or a dependency changes.

```jsx
import { signal, effect } from '@hellajs/core';

const UserProfile = ({ userId }) => {
  const user = signal(null);
  const loading = signal(true);

  effect(() => {
    loading(true);
    fetch(`/api/users/${userId()}`)
      .then(res => res.json())
      .then(data => user(data))
      .finally(() => loading(false));
  });

  return (
    <div>
      {() => loading() 
        ? <p>Loading...</p> 
        : <h1>{user()?.name}</h1>
      }
    </div>
  );
}
```

## Declarative Fetching with Resources

For more complex scenarios involving caching, refetching, and race condition prevention, HellaJS provides a `resource` primitive in the `@hellajs/resource` package.

```jsx
import { resource } from '@hellajs/resource';

const UserProfile = ({ userId }) => {
  const userResource = resource(
    (id) => fetch(`/api/users/${id}`).then(r => r.json()),
    { key: userId } // Re-fetches when userId changes
  );

  // Fetch on mount
  userResource.fetch();

  return (
    <div>
      {() => userResource.loading() && <p>Loading...</p>}
      {() => userResource.error() && <p>Error loading user!</p>}
      {() => userResource.data() && <h1>{userResource.data().name}</h1>}
    </div>
  );
}
```

<Aside type="note">
  The `resource` primitive automatically handles loading and error states for you, simplifying your component logic.
</Aside>
