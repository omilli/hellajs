---
title: Dependency Tracking
description: How HellaJS automatically tracks dependencies.
---

# Dependency Tracking

HellaJS automatically discovers dependencies at runtime. There is no need for explicit dependency arrays like in React's `useEffect`.

## The Tracking Stack

HellaJS uses a global tracking stack. When a reactive function (a `computed` or `effect`) starts executing, it pushes itself onto this stack.

1.  `effect(myEffect)` is called.
2.  `myEffect` is pushed onto the tracking stack.
3.  Inside `myEffect`, `mySignal()` is called.
4.  The `mySignal` getter sees that `myEffect` is at the top of the stack and adds `myEffect` to its list of subscribers.
5.  `myEffect` finishes, and is popped from the stack.

Now, `mySignal` knows that it needs to notify `myEffect` whenever its value changes.

## Dynamic Dependencies

Dependencies are re-evaluated on each run. This means a computation can change its dependencies based on conditional logic.

```jsx
const useA = signal(true);
const a = signal(1);
const b = signal(2);

const result = computed(() => {
  if (useA()) {
    return a(); // Depends on useA and a
  } else {
    return b(); // Depends on useA and b
  }
});
```

- If `useA()` is `true`, `result` depends on `useA` and `a`. A change to `b` will not cause `result` to recompute.
- If `useA()` is then set to `false`, `result` will recompute. Its dependencies are now `useA` and `b`. A change to `a` will no longer affect it.
