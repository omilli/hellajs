---
title: Advanced App - Blog with Routing
description: Build a complete blog application with client-side routing, data fetching, and advanced state management.
---

import { Aside } from '@astrojs/starlight/components';

Build a complete blog application demonstrating advanced HellaJS concepts including client-side routing, data fetching, and complex state management.

## What You'll Build

A full-featured blog application with:
- Client-side routing with multiple pages
- Data fetching with loading and error states
- Blog post creation and editing
- Comment system with nested replies
- Search and filtering
- Responsive layout

## Setup

Create a new project with additional packages:

```bash
npm create vite@latest blog-app -- --template vanilla
cd blog-app
npm install
npm install @hellajs/core @hellajs/dom @hellajs/router @hellajs/resource @hellajs/store
npm install --save-dev vite-plugin-hellajs
```

Configure Vite in `vite.config.js`:

```js
import { defineConfig } from 'vite';
import viteHellaJS from 'vite-plugin-hellajs';

export default defineConfig({
  plugins: [viteHellaJS()]
});
```

## Application Structure

Set up the main app structure with routing:

```jsx
import { signal, computed } from "@hellajs/core";
import { mount } from "@hellajs/dom";
import { Router, Route, Link, useRouter } from "@hellajs/router";
import { resource } from "@hellajs/resource";
import { store } from "@hellajs/store";

// Global app state
const appStore = store({
  user: null,
  posts: [],
  searchQuery: "",
  selectedCategory: "all"
});

// Mock API functions (replace with real API)
const api = {
  async getPosts() {
    // Simulate API delay
    await new Promise(resolve => setTimeout(resolve, 1000));
    return [
      {
        id: 1,
        title: "Getting Started with HellaJS",
        excerpt: "Learn the basics of reactive programming with HellaJS",
        content: "HellaJS is a reactive framework that makes building UIs simple and efficient...",
        author: "Jane Doe",
        category: "tutorial",
        date: "2024-01-15",
        comments: [
          { id: 1, author: "John", text: "Great introduction!", date: "2024-01-16" }
        ]
      },
      {
        id: 2,
        title: "Advanced State Management",
        excerpt: "Deep dive into complex state patterns",
        content: "Managing complex application state requires careful planning...",
        author: "John Smith",
        category: "advanced",
        date: "2024-01-10",
        comments: []
      }
    ];
  },

  async getPost(id) {
    const posts = await this.getPosts();
    return posts.find(p => p.id === parseInt(id));
  },

  async createPost(post) {
    await new Promise(resolve => setTimeout(resolve, 500));
    return { ...post, id: Date.now(), date: new Date().toISOString().split('T')[0] };
  }
};

// Layout component
const Layout = ({ children }) => (
  <div style="min-height: 100vh; display: flex; flex-direction: column;">
    <Header />
    <main style="flex: 1; container: 1200px; margin: 0 auto; padding: 2rem;">
      {children}
    </main>
    <Footer />
  </div>
);

// Header with navigation
const Header = () => (
  <header style="background: #2c3e50; color: white; padding: 1rem 2rem;">
    <nav style="display: flex; justify-content: space-between; align-items: center; max-width: 1200px; margin: 0 auto;">
      <Link href="/" style="font-size: 1.5rem; font-weight: bold; text-decoration: none; color: white;">
        HellaJS Blog
      </Link>
      <div style="display: flex; gap: 1rem;">
        <Link href="/" style="text-decoration: none; color: white; hover: opacity: 0.8;">Home</Link>
        <Link href="/create" style="text-decoration: none; color: white; hover: opacity: 0.8;">Write</Link>
        <Link href="/about" style="text-decoration: none; color: white; hover: opacity: 0.8;">About</Link>
      </div>
    </nav>
  </header>
);

const Footer = () => (
  <footer style="background: #34495e; color: white; text-align: center; padding: 2rem;">
    <p>&copy; 2024 HellaJS Blog. Built with HellaJS.</p>
  </footer>
);

// Home page with post list
const HomePage = () => {
  const posts = resource(() => api.getPosts());
  
  const categories = computed(() => {
    if (!posts.data()) return [];
    const cats = [...new Set(posts.data().map(p => p.category))];
    return ["all", ...cats];
  });

  const filteredPosts = computed(() => {
    if (!posts.data()) return [];
    let filtered = posts.data();
    
    if (appStore.selectedCategory !== "all") {
      filtered = filtered.filter(p => p.category === appStore.selectedCategory);
    }
    
    if (appStore.searchQuery) {
      const query = appStore.searchQuery.toLowerCase();
      filtered = filtered.filter(p => 
        p.title.toLowerCase().includes(query) ||
        p.excerpt.toLowerCase().includes(query)
      );
    }
    
    return filtered;
  });

  return (
    <div>
      <section style="margin-bottom: 3rem;">
        <h1>Welcome to HellaJS Blog</h1>
        <p>Discover articles about reactive programming, web development, and more.</p>
      </section>

      {/* Search and filters */}
      <div style="display: flex; gap: 1rem; margin-bottom: 2rem; flex-wrap: wrap;">
        <input
          type="text"
          placeholder="Search posts..."
          value={appStore.searchQuery}
          oninput={e => appStore.searchQuery = e.target.value}
          style="padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; flex: 1; min-width: 200px;"
        />
        <select
          value={appStore.selectedCategory}
          onchange={e => appStore.selectedCategory = e.target.value}
          style="padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;"
        >
          {categories().map(cat => (
            <option key={cat} value={cat}>
              {cat === "all" ? "All Categories" : cat.charAt(0).toUpperCase() + cat.slice(1)}
            </option>
          ))}
        </select>
      </div>

      {/* Posts list */}
      {posts.loading() && <div>Loading posts...</div>}
      {posts.error() && <div style="color: red;">Error: {posts.error().message}</div>}
      
      {posts.data() && (
        <div style="display: grid; gap: 2rem;">
          {filteredPosts().length === 0 ? (
            <p>No posts found matching your criteria.</p>
          ) : (
            filteredPosts().map(post => (
              <PostCard key={post.id} post={post} />
            ))
          )}
        </div>
      )}
    </div>
  );
};

// Post card component
const PostCard = ({ post }) => (
  <article style="border: 1px solid #e1e1e1; border-radius: 8px; padding: 1.5rem; background: white; shadow: 0 2px 4px rgba(0,0,0,0.1);">
    <header style="margin-bottom: 1rem;">
      <h2 style="margin: 0 0 0.5rem 0;">
        <Link href={`/post/${post.id}`} style="text-decoration: none; color: #2c3e50;">
          {post.title}
        </Link>
      </h2>
      <div style="font-size: 0.9rem; color: #666; display: flex; gap: 1rem;">
        <span>By {post.author}</span>
        <span>{post.date}</span>
        <span style="background: #3498db; color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.8rem;">
          {post.category}
        </span>
      </div>
    </header>
    <p style="margin: 1rem 0; color: #555; line-height: 1.6;">{post.excerpt}</p>
    <footer style="display: flex; justify-content: space-between; align-items: center;">
      <Link 
        href={`/post/${post.id}`}
        style="color: #3498db; text-decoration: none; font-weight: bold;"
      >
        Read More →
      </Link>
      <span style="font-size: 0.9rem; color: #666;">
        {post.comments.length} comment{post.comments.length !== 1 ? 's' : ''}
      </span>
    </footer>
  </article>
);

// Post detail page
const PostPage = () => {
  const router = useRouter();
  const postId = computed(() => router.params.id);
  const post = resource(() => api.getPost(postId()));
  const newComment = signal("");

  const addComment = (e) => {
    e.preventDefault();
    const comment = newComment().trim();
    if (!comment) return;

    // In a real app, you'd call an API here
    const currentPost = post.data();
    if (currentPost) {
      currentPost.comments.push({
        id: Date.now(),
        author: "Anonymous", // In real app, get from user session
        text: comment,
        date: new Date().toISOString().split('T')[0]
      });
      post.refetch(); // Refresh the resource
    }
    newComment("");
  };

  return (
    <div>
      {post.loading() && <div>Loading post...</div>}
      {post.error() && <div style="color: red;">Error: {post.error().message}</div>}
      
      {post.data() && (
        <article>
          <header style="margin-bottom: 2rem; border-bottom: 1px solid #e1e1e1; padding-bottom: 1rem;">
            <h1 style="margin: 0 0 1rem 0;">{post.data().title}</h1>
            <div style="color: #666; display: flex; gap: 1rem;">
              <span>By {post.data().author}</span>
              <span>{post.data().date}</span>
              <span style="background: #3498db; color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.9rem;">
                {post.data().category}
              </span>
            </div>
          </header>

          <div style="line-height: 1.8; margin-bottom: 3rem;">
            {post.data().content.split('\n').map((paragraph, i) => (
              <p key={i} style="margin-bottom: 1rem;">{paragraph}</p>
            ))}
          </div>

          {/* Comments section */}
          <section>
            <h3>Comments ({post.data().comments.length})</h3>
            
            <form onsubmit={addComment} style="margin: 1rem 0 2rem 0;">
              <textarea
                value={newComment}
                oninput={e => newComment(e.target.value)}
                placeholder="Add a comment..."
                style="width: 100%; min-height: 100px; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; resize: vertical;"
              ></textarea>
              <button 
                type="submit"
                disabled={() => newComment().trim() === ""}
                style="margin-top: 0.5rem; padding: 0.5rem 1rem; background: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer;"
              >
                Add Comment
              </button>
            </form>

            <div style="display: flex; flex-direction: column; gap: 1rem;">
              {post.data().comments.map(comment => (
                <div key={comment.id} style="border: 1px solid #e1e1e1; border-radius: 4px; padding: 1rem; background: #f8f9fa;">
                  <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                    <strong>{comment.author}</strong>
                    <small style="color: #666;">{comment.date}</small>
                  </div>
                  <p style="margin: 0;">{comment.text}</p>
                </div>
              ))}
            </div>
          </section>
        </article>
      )}
      
      <div style="margin-top: 2rem;">
        <Link href="/" style="color: #3498db; text-decoration: none;">← Back to Home</Link>
      </div>
    </div>
  );
};

// Create post page
const CreatePostPage = () => {
  const router = useRouter();
  const form = store({
    title: "",
    excerpt: "",
    content: "",
    category: "tutorial"
  });
  const isSubmitting = signal(false);

  const handleSubmit = async (e) => {
    e.preventDefault();
    isSubmitting(true);

    try {
      const newPost = await api.createPost({
        title: form.title,
        excerpt: form.excerpt,
        content: form.content,
        category: form.category,
        author: "Current User" // In real app, get from session
      });

      // Redirect to new post
      router.navigate(`/post/${newPost.id}`);
    } catch (error) {
      console.error('Failed to create post:', error);
    } finally {
      isSubmitting(false);
    }
  };

  const isValid = computed(() => 
    form.title.trim() && 
    form.excerpt.trim() && 
    form.content.trim()
  );

  return (
    <div style="max-width: 800px;">
      <h1>Create New Post</h1>
      
      <form onsubmit={handleSubmit} style="display: flex; flex-direction: column; gap: 1rem;">
        <div>
          <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Title</label>
          <input
            type="text"
            value={form.title}
            oninput={e => form.title = e.target.value}
            placeholder="Enter post title..."
            style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;"
          />
        </div>

        <div>
          <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Category</label>
          <select
            value={form.category}
            onchange={e => form.category = e.target.value}
            style="padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;"
          >
            <option value="tutorial">Tutorial</option>
            <option value="advanced">Advanced</option>
            <option value="news">News</option>
            <option value="opinion">Opinion</option>
          </select>
        </div>

        <div>
          <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Excerpt</label>
          <textarea
            value={form.excerpt}
            oninput={e => form.excerpt = e.target.value}
            placeholder="Brief description of your post..."
            style="width: 100%; min-height: 80px; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; resize: vertical;"
          ></textarea>
        </div>

        <div>
          <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Content</label>
          <textarea
            value={form.content}
            oninput={e => form.content = e.target.value}
            placeholder="Write your post content here..."
            style="width: 100%; min-height: 300px; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; resize: vertical;"
          ></textarea>
        </div>

        <div style="display: flex; gap: 1rem;">
          <button
            type="submit"
            disabled={() => !isValid() || isSubmitting()}
            style="padding: 0.75rem 1.5rem; background: #2ecc71; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold;"
          >
            {isSubmitting() ? "Publishing..." : "Publish Post"}
          </button>
          <Link 
            href="/"
            style="display: inline-block; padding: 0.75rem 1.5rem; background: #95a5a6; color: white; text-decoration: none; border-radius: 4px; text-align: center;"
          >
            Cancel
          </Link>
        </div>
      </form>
    </div>
  );
};

// About page
const AboutPage = () => (
  <div style="max-width: 800px;">
    <h1>About HellaJS Blog</h1>
    <p style="font-size: 1.2rem; line-height: 1.6; margin-bottom: 2rem;">
      This blog demonstrates the power and simplicity of HellaJS for building complex web applications.
    </p>
    <p style="line-height: 1.6; margin-bottom: 1rem;">
      HellaJS is a reactive framework that makes building UIs simple and efficient. Unlike traditional frameworks,
      HellaJS updates only the specific DOM nodes that need to change, resulting in exceptional performance.
    </p>
    <p style="line-height: 1.6;">
      This blog application showcases several advanced concepts including client-side routing, 
      data fetching with resources, complex state management with stores, and reactive form handling.
    </p>
  </div>
);

// Main App component with router
const App = () => (
  <Router>
    <Layout>
      <Route path="/" component={HomePage} />
      <Route path="/post/:id" component={PostPage} />
      <Route path="/create" component={CreatePostPage} />
      <Route path="/about" component={AboutPage} />
      <Route path="*" component={() => (
        <div style="text-align: center; padding: 4rem;">
          <h1>404 - Page Not Found</h1>
          <p>The page you're looking for doesn't exist.</p>
          <Link href="/" style="color: #3498db; text-decoration: none;">Go Home</Link>
        </div>
      )} />
    </Layout>
  </Router>
);

mount(App, "#app");
```

## Key Advanced Concepts

### 1. Client-Side Routing
- Multiple pages with URL-based navigation
- Dynamic route parameters (post IDs)
- Programmatic navigation
- 404 handling

### 2. Data Fetching with Resources
- Async data loading with loading states
- Error handling and retry logic
- Resource dependencies and refetching
- Mock API integration points

### 3. Complex State Management
- Global app state with stores
- Nested reactive objects
- Form state management
- Search and filtering state

### 4. Component Architecture
- Layout components with shared UI
- Reusable components (PostCard)
- Props and event handling
- Conditional rendering patterns

### 5. Real-World Patterns
- Form validation and submission
- Local storage persistence
- Comment system with CRUD operations
- Search and filtering functionality

## Styling and Polish

Add a CSS file for better styling:

```css
/* Add to your main CSS file */
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  line-height: 1.6;
  color: #333;
  background: #f8f9fa;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 2rem;
}

button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

a:hover {
  opacity: 0.8;
}

@media (max-width: 768px) {
  .container {
    padding: 0 1rem;
  }
  
  nav {
    flex-direction: column;
    gap: 1rem;
  }
}
```

## Next Steps

Congratulations! You've built a sophisticated blog application that demonstrates advanced HellaJS patterns. This app shows how HellaJS scales from simple components to complex applications.

## What You've Learned

- **Routing**: Multi-page applications with dynamic routes
- **Data Fetching**: Async data with resources and loading states  
- **State Management**: Global state with stores and local component state
- **Component Patterns**: Reusable components and composition
- **Real-World Features**: Forms, search, CRUD operations, and navigation

## Continue Your Journey

- **[Reactivity Deep Dive](/learn/concepts/reactivity)** - Master the reactive system
- **[State Management Patterns](/learn/concepts/state)** - Advanced state management
- **[Performance Optimization](/learn/concepts/performance)** - Optimize for production
- **[Testing Strategies](/learn/concepts/testing)** - Test your applications