#!/bin/bash

# Run bun sync
echo "Running bun sync..."
if ! bun sync; then
    echo "bun sync failed"
    exit 1
fi

# Check if there are any CLAUDE.md or AGENTS.md files to add
if [ -n "$(git status --porcelain | grep -E '(CLAUDE|AGENTS)\.md')" ]; then
    echo "CLAUDE.md or AGENTS.md files detected after bun sync, adding them to commit..."
    git add **/CLAUDE.md **/AGENTS.md 2>/dev/null || true
fi

# Exit successfully
exit 0
